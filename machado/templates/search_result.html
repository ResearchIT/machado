<!--
 Copyright 2018 by Embrapa.  All rights reserved.

 This code is part of the machado distribution and governed by its
 license. Please see the LICENSE.txt and README.md files that should
 have been included as part of this package for licensing information.
-->

{% extends 'base.html' %}

{% block content %}

{% include "search_form.html" %}

    {% if object_list %}

    <div class="container">
        <div class="row">
        <div class="col-md-3">
            <h3>Filters</h3>
            <dl>
                {% if facets.fields.organism %}
                <dt>Filter by Organism</dt>
                {% for organism in facets.fields.organism %}
                <dd>
                    <li><a href="{{ request.get_full_path}}&selected_facets=organism_exact:{{ organism.0 }}"><i>{{ organism.0|capfirst }}</i> </a>({{ organism.1 }})</li>
                </dd>
                {% endfor %}
                {% endif %}
            </dl>
            <dl>
                {% if facets.fields.so_term %}
                <dt>Filter by SO term</dt>
                {% for so_term in facets.fields.so_term %}
                <dd>
                    <li><a href="{{ request.get_full_path}}&selected_facets=so_term_exact:{{ so_term.0 }}">{{ so_term.0 }} </a>({{ so_term.1 }})</li>
                </dd>
                {% endfor %}
                {% endif %}
            </dl>
        </div>

        <div class="col-md-9">
            <h3>Results</h3>
            <table>
            {% for result in page_obj.object_list %}
                <tr>
                    <td>
                        {{ result.object.type.name }}
                    </td>
                    <td>
                        <a href="/machado/feature/?feature_id={{ result.object.feature_id|safe }}">{{ result.object.uniquename }}</a>
                    </td>
                </tr>
            {% empty %}
                <p>No results found.</p>
            {% endfor %}
            </table>

            {% if page_obj.has_previous or page_obj.has_next %}
                <div>
                    {% if page_obj.has_previous %}<a href="?q={{ query }}&amp;page={{ page_obj.previous_page_number }}">{% endif %}&laquo; Previous{% if page_obj.has_previous %}</a>{% endif %}
                    |
                    {% if page_obj.has_next %}<a href="?q={{ query }}&amp;page={{ page_obj.next_page_number }}">{% endif %}Next &raquo;{% if page_obj.has_next %}</a>{% endif %}
                </div>
            {% endif %}
            {% else %}
            Not found.
            {# Show some example queries to run, maybe query syntax, something else? #}

            {% endif %}

        </div>
        </div>
    </div>
{% endblock %}
